{% extends 'base.html' %}
{% load static %}

{% block title %}Greenville Locksmith Services | 24/7 Emergency Locksmith{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 text-center mb-4 mb-lg-0">
                <img src="{% static 'images/logo2.png' %}" alt="Locksmith Services" class="img-fluid rounded" style="width: 80%; height: auto;">
            </div>
            <div class="col-lg-6 text-center text-lg-start">
                <h1 class="display-4 fw-bold mb-4">Locked Out? <p>We're Here to Help!</p></h1>
                <p class="lead fs-5 mb-4">24/7 Emergency Locksmith Services in Greenville</p>
                <div class="emergency-notice bg-danger text-white p-3 rounded mb-4 d-flex align-items-center">
                    <i class="bi bi-exclamation-triangle-fill me-2 fs-4"></i>
                    <span class="fw-bold">Need Immediate Help? Call Now! Our Techs Are Ready 24/7</span>
                </div>
                <div class="d-grid gap-3 d-md-flex justify-content-md-center">
                    <a href="tel:786-353-8018" class="btn btn-success btn-lg px-4 py-3 emergency-call">
                        <i class="bi bi-telephone-fill me-2"></i> Call Now: 786-353-8018
                    </a>
                    <a href="#contact" class="btn btn-outline-light btn-lg px-4 py-3">
                        <i class="bi bi-calendar-check me-2"></i> Schedule Service
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section id="services" class="services-section">
    <div class="container">
        <h2 class="text-center mb-5">Our Professional Services</h2>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="card service-card">
                    <div class="card-body text-center p-4">
                        <div class="service-icon">
                            <i class="bi bi-car-front-fill fs-1"></i>
                        </div>
                        <h5 class="card-title">Car Lockouts & Key Programming</h5>
                        <p>Fast, damage-free car unlocking and key programming services for all makes and models</p>
                        <div class="guarantee-badge">
                            <i class="bi bi-shield-check me-1"></i> Same Day Service
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card service-card">
                    <div class="card-body text-center p-4">
                        <div class="service-icon">
                            <i class="bi bi-house-fill fs-1"></i>
                        </div>
                        <h5 class="card-title">Home Lockout & Rekeying</h5>
                        <p>Secure your home with professional lockout services and affordable rekeying solutions</p>
                        <div class="guarantee-badge">
                            <i class="bi bi-shield-check me-1"></i> 30-Day Guarantee
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card service-card">
                    <div class="card-body text-center p-4">
                        <div class="service-icon">
                            <i class="bi bi-buildings fs-1"></i>
                        </div>
                        <h5 class="card-title">Commercial Security</h5>
                        <p>Complete commercial lock systems installation, repair and maintenance services</p>
                        <div class="guarantee-badge">
                            <i class="bi bi-shield-check me-1"></i> Secure Solutions
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card service-card">
                    <div class="card-body text-center p-4">
                        <div class="service-icon">
                            <i class="bi bi-unlock fs-1"></i>
                        </div>
                        <h5 class="card-title">Safe Opening Services</h5>
                        <p>Professional safe opening with no damage to your safe or contents</p>
                        <div class="guarantee-badge">
                            <i class="bi bi-shield-check me-1"></i> No Damage Promise
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- About Section -->
<section id="about" class="py-4">
    <div class="container">
        <h2 class="text-center mb-4">Why Greenville Trusts Our Locksmith Services</h2>
        <div class="row align-items-center">
            <div class="col-md-6 mb-4 mb-md-0">
                <p class="lead mb-4">Greenville's most trusted locksmith service for over 10 years. We understand that being locked out can be stressful, which is why we're committed to providing fast, reliable service when you need it most.</p>
                <div class="stats-row d-flex justify-content-around mb-4">
                    <div class="stat-item text-center">
                        <div class="stat-number text-primary fw-bold fs-2">24/7</div>
                        <div class="stat-label">Available</div>
                    </div>
                    <div class="stat-item text-center">
                        <div class="stat-number text-primary fw-bold fs-2">15-20</div>
                        <div class="stat-label">Min Response</div>
                    </div>
                    <div class="stat-item text-center">
                        <div class="stat-number text-primary fw-bold fs-2">10+</div>
                        <div class="stat-label">Years Experience</div>
                    </div>
                </div>
                <div class="testimonial-box bg-light p-4 rounded">
                    <div class="testimonial-content">
                        <i class="bi bi-quote fs-1 text-muted"></i>
                        <p class="mb-2">"Our locksmith saved me when I was locked out of my business at 2 AM. They arrived in 15 minutes and got me back in without any damage to the door. I won't call anyone else!"</p>
                        <div class="testimonial-author">
                            <strong>John D.</strong> - Greenville Business Owner
                        </div>
                    </div>
                </div>
                <div class="trust-badges mt-3 d-flex justify-content-center gap-3">
                    <span class="badge bg-primary p-2"><i class="bi bi-shield-check me-1"></i> Licensed</span>
                    <span class="badge bg-success p-2"><i class="bi bi-check-circle me-1"></i> Insured</span>
                    <span class="badge bg-warning text-dark p-2"><i class="bi bi-star-fill me-1"></i> 5-Star Rated</span>
                </div>
            </div>
            <div class="col-md-6 d-flex justify-content-center align-items-center">
                <div class="position-relative d-flex justify-content-center align-items-center">
                    <video src="{% static 'videos/locksmith.mp4' %}" alt="Locksmith Services Video" class="img-fluid rounded shadow-lg" style="width: 60%; height: auto; transition: transform 0.3s ease;" controls autoplay muted loop>
                        Your browser does not support the video tag.
                    </video>
                    <div class="position-absolute bottom-0 end-0 bg-success text-white p-2 rounded-start">
                        <i class="bi bi-award-fill me-1"></i> <b>LICENSED!</b>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold mb-3">Get Help in Minutes</h2>
            <p class="lead text-muted">24/7 Emergency Locksmith Services - No Callout Fee for Greenville Residents</p>
        </div>

        <div class="row g-4">
            <div class="col-lg-4">
                <div class="contact-card bg-primary text-white rounded-4 p-4 h-100 shadow-lg position-relative overflow-hidden">
                    <div class="position-relative z-10">
                        <h3 class="h4 mb-4">Why Choose Us</h3>
                        <ul class="list-unstyled mb-4">
                            <li class="d-flex align-items-center mb-3">
                                <i class="bi bi-check-circle-fill me-3"></i>
                                <span>Licensed & Insured Technicians</span>
                            </li>
                            <li class="d-flex align-items-center mb-3">
                                <i class="bi bi-check-circle-fill me-3"></i>
                                <span>Average 15-20 minutes response time</span>
                            </li>
                            <li class="d-flex align-items-center mb-3">
                                <i class="bi bi-check-circle-fill me-3"></i>
                                <span>No callout fee in Greenville area</span>
                            </li>
                            <li class="d-flex align-items-center">
                                <i class="bi bi-check-circle-fill me-3"></i>
                                <span>Workmanship guaranteed for 90 days</span>
                            </li>
                        </ul>
                        <div class="emergency-notice bg-warning text-dark py-3 px-4 rounded-3 d-flex align-items-center">
                            <i class="bi bi-exclamation-triangle-fill fs-4 me-3"></i>
                            <div>
                                <span class="fw-bold">Emergency Service Available 24/7</span>
                                <p class="mb-0 small">Call <a href="tel:786-353-8018" class="fw-bold">786-353-8018</a> for immediate assistance</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                <h3 class="mb-3">Request Callback</h3>
                <p class="text-muted mb-4">Fill out the form and we'll call you back at your preferred time.</p>

                <div id="form-message"></div>

                <form id="callbackForm" method="POST" action="{% url 'callback_view' %}">
                    {% csrf_token %}
                    <div class="form-group mb-3">
                        <label for="name">Full Name</label>
                        <input type="text" class="form-control" id="name" name="name" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="phone">Phone Number</label>
                        <input type="tel" class="form-control" id="phone" name="phone" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="time">Preferred Callback Time</label>
                        <select class="form-control" id="time" name="time" required>
                            <option value="">Select a time</option>
                            <option value="morning">Morning (9:00 - 12:00)</option>
                            <option value="afternoon">Afternoon (12:00 - 17:00)</option>
                            <option value="evening">Evening (17:00 - 21:00)</option>
                        </select>
                    </div>
                    <div class="form-group mb-4">
                        <label for="message">Additional Information (Optional)</label>
                        <textarea class="form-control" id="message" name="message" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg w-100">Request Callback</button>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('callbackForm');
        const messageContainer = document.getElementById('form-message');

        if (form && messageContainer) {
            form.addEventListener('submit', function (e) {
                e.preventDefault();

                // Show loading message
                messageContainer.innerHTML = '<div class="alert alert-info"><i class="bi bi-hourglass-split me-2"></i>Sending...</div>';

                // Submit form
                fetch('{% url "callback_view" %}', {
                    method: 'POST',
                    body: new FormData(form),
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    messageContainer.innerHTML = '';

                    if (data.success) {
                        // Show success message
                        messageContainer.innerHTML = `
                            <div class="alert alert-success">
                                <i class="bi bi-check-circle-fill me-2"></i>
                                ${data.message}
                            </div>
                        `;
                        form.reset();

                        // Hide after 5 seconds
                        setTimeout(() => {
                            messageContainer.innerHTML = '';
                        }, 5000);
                    } else {
                        // Show errors
                        let errorsHTML = '<ul class="mb-0">';
                        for (const field in data.errors) {
                            errorsHTML += `<li><strong>${field}:</strong> ${data.errors[field][0]}</li>`;
                        }
                        errorsHTML += '</ul>';

                        messageContainer.innerHTML = `
                            <div class="alert alert-danger">
                                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                Please fix the errors: ${errorsHTML}
                            </div>
                        `;

                        // Hide after 5 seconds
                        setTimeout(() => {
                            messageContainer.innerHTML = '';
                        }, 5000);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    messageContainer.innerHTML = `
                        <div class="alert alert-danger">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            An error occurred. Please try again.
                        </div>
                    `;
                });
            });
        }
    });
</script>
{% endblock %}